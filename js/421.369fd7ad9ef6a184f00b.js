"use strict";(self.webpackChunksaturn_fm=self.webpackChunksaturn_fm||[]).push([[421],{9421:(e,t,n)=>{n.r(t),n.d(t,{FileReaderUI:()=>E,default:()=>j});var r=n(6902),a=n(7294),l=n(6261),c=n(2363),i=n(4707),s=n(5530),o=n(7628),d=n.n(o),u=n(4586);const m=e=>"string"==typeof e&&e.length;async function p(e){let t={};try{t=await function(e){return new Promise(((t,n)=>{d().read(e,{onSuccess:e=>t(e),onError:e=>n(e)})}))}(e)}catch(e){console.log("Fetching Tags Error",e)}const{tags:{artist:n,album:r,title:a,track:l,picture:c}={}}=t;let i;if(c?.data){const e=new Uint8Array(c?.data),t=new Blob([e],{type:c?.format});i=URL.createObjectURL(t)}return{file:e,track:l??0,artist:m(n)?n:"Unknown Artist",album:m(r)?r:"Unknown Album",title:m(a)?a:e.name,albumArtUrl:i}}async function g(e){let t;try{t=await async function(e){let{extensions:t,allowDirectory:n}=e;return new Promise((e=>{const r=document.createElement("input");t&&r.setAttribute("accept",t),r.type="file",r.multiple=!0,r.webkitdirectory=n,r.directory=n,r.mozdirectory=n,r.addEventListener("change",(t=>{e(t.target.files),document.body.removeChild(r)})),document.body.appendChild(r),r.click()}))}(e),console.log(t)}catch(e){console.log(e)}return await async function(e){const t=[];for(const n of Array.from(e))n.type.includes("audio")&&t.push(p(n));return(await Promise.all(t)).reduce(((e,t)=>(e.push({...t,id:(0,u.Z)()}),e)),[])}(t)}const f=e=>{let{isDragging:t,currentPlaying:n}=e;return`draggable ${t?"isDragging":""} ${n?"currentTrack":""}`};function y(e){const t=s.jt.state.currentTrackIndex;if(!e.destination)return;const n=((e,t,n)=>{const r=Array.from(e),[a]=r.splice(t,1);return r.splice(n,0,a),r})(s.jt.state.tracks,e.source.index,e.destination.index);e.source.index===t?s.jt.setCurrentTrack(e.destination.index):e.destination.index===t?e.source.index<t?s.jt.setCurrentTrack(t-1):s.jt.setCurrentTrack(e.destination.index?t+1:1):e.source.index>t&&t>e.destination.index?s.jt.setCurrentTrack(t+1):e.source.index<t&&t<e.destination.index&&s.jt.setCurrentTrack(t-1),s.jt.setNewTrackOrder(n)}const E=e=>{let{toggleMenu:t,fileReaderCopy:n,tracks:r}=e;return a.createElement(i.u,{header:n.header},a.createElement(b,null,a.createElement(w,null),a.createElement(h,null,a.createElement(l.Z5,{onDragEnd:y},a.createElement(l.bK,{droppableId:"droppable"},(e=>a.createElement("div",{ref:e.innerRef},r.map(((e,t)=>{let{artist:n,album:r,title:c,id:i}=e;return a.createElement(l._l,{key:i,draggableId:i,index:t},((e,l)=>{let{isDragging:i}=l;return a.createElement("div",{className:f({isDragging:i,currentPlaying:!1}),ref:e.innerRef,...e.draggableProps,...e.dragHandleProps},a.createElement("div",null,t+1),a.createElement("div",null,c),a.createElement("div",null,n),a.createElement("div",null,r),a.createElement("button",{className:"icon-button",type:"button"},"â–µ"))}))})),e.placeholder)))))),a.createElement(k,null,a.createElement(C,{className:"add-files",type:"button",onClick:()=>async function(){const e=await g({extensions:".mp3, .wav, .aac",allowDirectory:!0});s.jt.addTracks(e)}()},"Add a directory"),a.createElement(C,{className:"add-files",type:"button",onClick:()=>async function(){const e=await g({extensions:".mp3, .m4a, .flac, .wav, .aac"});s.jt.addTracks(e)}()},"Add file(s)")),a.createElement(v,null,a.createElement(C,{type:"button",onClick:t},"Exit")))},k=(0,r.Z)("div")({name:"EditorControlButtons",class:"e1mg7kbj"}),b=(0,r.Z)("div")({name:"PlaylistWrapper",class:"p1uek7d8"}),v=(0,r.Z)("footer")({name:"PlaylistFooter",class:"p1dzh8pt"}),w=()=>{const{playlist:e}=(0,c.TE)();return a.createElement(x,null,a.createElement("div",null,e.number),a.createElement("div",null,e.title),a.createElement("div",null,e.artist),a.createElement("div",null,e.album),a.createElement("div",null))},x=(0,r.Z)("div")({name:"PlaylistHeaderWrapper",class:"phmbk66"}),h=(0,r.Z)("div")({name:"PlaylistEditor",class:"p1mc0a8x"}),C=(0,r.Z)("button")({name:"SaturnButton",class:"sjc7lr3"}),j=function(e){let{toggleMenu:t}=e;const{tracks:n}=(0,s.AE)(),{fileReader:r}=(0,c.TE)();return a.createElement(E,{toggleMenu:t,fileReaderCopy:r,tracks:n})};n(5213)},5213:(e,t,n)=>{n.r(t)}}]);
//# sourceMappingURL=421.369fd7ad9ef6a184f00b.js.map